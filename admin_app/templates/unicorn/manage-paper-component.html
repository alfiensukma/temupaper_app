{% load static %}
<div>
    <!-- Progress Section -->
    <div id="progressSection" class="d-none">
        <div class="text-center mb-4">
            <h4>Memproses Data...</h4>
            <div class="progress" style="height: 25px;">
                <div class="progress-bar progress-bar-striped progress-bar-animated"
                     role="progressbar"
                     style="width: 0%;"
                     id="importProgress">
                    Step 0/4
                </div>
            </div>
            <div class="mt-3">
                <span class="badge bg-primary" id="stepDetail">Starting...</span>
            </div>
            <ul id="importLog" class="list-group small mt-3 text-start"></ul>
            <button id="backToUpload" class="btn btn-secondary mt-2 d-none">Kembali ke Upload</button>
        </div>
    </div>

    <!-- Upload Section -->
    <div id="uploadSection">
        <form id="uploadForm" enctype="multipart/form-data">
            {% csrf_token %}
            <h5>File Karya Ilmiah</h5>
            <input type="file" class="d-none" id="csvInput" name="csv_file" accept=".csv">
            <div class="dropzone" id="csvDropzone"
                 style="border: 2px dashed; border-radius: 12px; padding: 40px 20px; transition: background-color 0.3s ease;">
                <div class="dz-message text-center" style="cursor: pointer; color: #2563eb;">
                    <i class="fas fa-file-csv fa-5x mb-3" style="color: #3b82f6;"></i>
                    <p style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0;">Seret file CSV di sini atau klik untuk memilih</p>
                    <p style="font-size: 0.9rem; color: #60a5fa;">(Hanya file CSV yang diperbolehkan)</p>
                </div>
            </div>
            <h5 class="mt-3">File Referensi</h5>
            <input type="file" class="d-none" id="referensiCsvInput" name="referensi_csv_file" accept=".csv">
            <div class="dropzone" id="referensiCsvDropzone"
                 style="border: 2px dashed; border-radius: 12px; padding: 40px 20px; transition: background-color 0.3s ease;">
                <div class="dz-message text-center" style="cursor: pointer; color: #2563eb;">
                    <i class="fas fa-file-csv fa-5x mb-3" style="color: #3b82f6;"></i>
                    <p style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0;">Seret file CSV di sini atau klik untuk memilih</p>
                    <p style="font-size: 0.9rem; color: #60a5fa;">(Hanya file CSV yang diperbolehkan)</p>
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="button" class="btn btn-primary" id="importBtn" disabled>Simpan & Import</button>
            </div>
        </form>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>
<script src="{% static 'js/upload-csv.js' %}"></script>
</div>